<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gala Jars Crisol</title>
    <style>
        body {
            margin: 0;
            height: 100dvh;
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            position: relative;
            overflow: hidden; /* Para evitar barras de desplazamiento durante la animaci√≥n */
            transition: transform 0.5s ease; /* A√±adido para animar el movimiento del body */
        }

        .button {
            position: absolute;
            padding: 15px 30px;
            font-size: 18px;
            color: #fff;
            background-color: #007BFF;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
            transform-origin: center center;
        }

        .button:hover {
            background-color: #0056b3;
        }

        /* Posicionamiento de botones */
        #button1 {
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
        }

        #button2 {
            bottom: 10%;
            left: 50%;
            transform: translateX(-50%);
        }

        #button3 {
            top: 50%;
            left: 10%;
            transform: translateY(-50%);
        }

        #button4 {
            top: 50%;
            right: 10%;
            transform: translateY(-50%);
        }

        /* Toast style */
        #toast, #toast4, #toast2, #toast3 {
            visibility: hidden;
            min-width: 250px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 2px;
            padding: 16px;
            position: fixed;
            z-index: 1;
            font-size: 17px;
            transform: translateX(-50%);
        }

        #toast.show, #toast4.show, #toast2.show, #toast3.show {
            visibility: visible;
            -webkit-animation: fadein 0.5s, fadeout 0.5s 5s; /* Ajustado a 5s para el toast4 */
            animation: fadein 0.5s, fadeout 0.5s 5s; /* Ajustado a 5s para el toast4 */
        }

        @keyframes fadein {
            from {opacity: 0;}
            to {opacity: 1;}
        }

        @keyframes fadeout {
            from {opacity: 1;}
            to {opacity: 0;}
        }

        .coin {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            opacity: 0;
        }

        /* Lluvia de arroz */
        .rain {
            position: absolute;
            pointer-events: none;
        }

        .rain .drop {
            position: absolute;
            width: 5px;
            height: 5px;
            background-color: white;
            border-radius: 50%;
            opacity: 1;
            pointer-events: none;
        }

        /* Estilo del popup */
        #popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            border: 2px solid #007BFF;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            padding: 20px;
            z-index: 2;
            text-align: center;
        }

        #popup img {
            max-width: 100%;
            height: auto;
            margin-top: 10px;
        }

        #popup button, #popup .close-btn {
            margin-top: 10px;
            padding: 10px 20px;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #popup button:hover, #popup .close-btn:hover {
            background-color: #0056b3;
        }

        #popup .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px;
            font-size: 18px;
            background: transparent;
            border: none;
            color: #007BFF;
            cursor: pointer;
        }

        #popup .close-btn:hover {
            color: #0056b3;
        }

        /* Fondo del popup para cerrar al hacer clic fuera de √©l */
        #popup-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1;
        }
    </style>
</head>
<body>
    <button class="button" id="button1">Bot√≥n 1</button>
    <button class="button" id="button2">Bot√≥n 2</button>
    <button class="button" id="button3">Bot√≥n 3</button>
    <button class="button" id="button4">Bot√≥n 4</button>
    
    <div id="toast">üéµ Yemba yemba, numa numanei</div>
    <div id="toast2">Has recibido el cromo de Pikachu</div>
    <div id="toast3">Rice for Lowis üç≤</div>
    <div id="toast4">Gracias por tu aportaci√≥n, ya tenemos 0‚Ç¨</div>

    <div id="rain" class="rain"></div>

    <div id="popup-overlay"></div>
    <div id="popup">
        <button class="close-btn" id="popup-close-btn">√ó</button>
        <div id="popup-message">Enhorabuena, has ganado el siguiente cromo Pok√©mon:</div>
        <img id="popup-image" src="" alt="Cromo Pok√©mon">
        <button id="popup-close">Gracias</button>
    </div>
    
    <script>
        function vibrateDevice() {
            if (navigator.vibrate) {
                navigator.vibrate(500);
            }
        }

        function showToast(button, toastId, message) {
            const toast = document.getElementById(toastId);
            const rect = button.getBoundingClientRect();
            toast.style.top = `${rect.bottom + window.scrollY}px`;
            toast.style.left = `${rect.left + rect.width / 2}px`;
            toast.textContent = message;
            toast.className = "show";
            setTimeout(() => { toast.className = toast.className.replace("show", ""); }, 5000); // Aumentado a 5000ms
        }

        function formatNumber(number) {
            // Reemplazar el punto por coma como separador decimal
            // y agregar punto como separador de miles
            const parts = number.toString().split('.');
            let integerPart = parts[0];
            const decimalPart = parts[1] || '00';

            integerPart = integerPart.replace(/\B(?=(\d{3})+(?!\d))/g, '.');

            return `${integerPart},${decimalPart.padEnd(2, '0')}`;
        }

        document.getElementById("button1").addEventListener("click", function() {
            vibrateDevice();
            
            // Animaci√≥n de movimiento de la pantalla
            document.body.style.transform = "translateX(-20%)";
            setTimeout(() => {
                document.body.style.transform = "translateX(20%)";
            }, 500);
            setTimeout(() => {
                document.body.style.transform = "translateX(0)";
            }, 1000);
            
            // Frases aleatorias
            const phrases = [
                "üéµ Yemba yemba, numa numa nei, numa numa numa nei üéµ",
                "üéµ Alvar√≠n alvar√≠n, alvar√≠n te quiero, lo lo lo lorolor√≥ lo lo lo lorolor√≥ üéµ",
                "üéµ He visto una luz, hace tiempo Ven√∫s se apagoooo√≥... üéµ"
            ];
            const randomPhrase = phrases[Math.floor(Math.random() * phrases.length)];
            showToast(this, "toast", randomPhrase);
        });

        // Bot√≥n 2: Vibrar y mostrar popup
        document.getElementById("button2").addEventListener("click", function() {
            vibrateDevice();

            this.style.transition = "transform 1s";
            this.style.transform = "translateX(-50%) translateY(0) rotate(360deg)";
            setTimeout(() => {
                this.style.transform = "translateX(-50%) translateY(0) rotate(0deg)";
            }, 1000);

            // Mostrar popup
            const popup = document.getElementById('popup');
            const overlay = document.getElementById('popup-overlay');
            const popupImage = document.getElementById('popup-image');
            
            // Seleccionar una imagen aleatoria
            const images = [
                "https://iotools.cloud/wp-content/themes/iotools/assets/images/pokemon/pikachu.jpeg",
                "https://iotools.cloud/wp-content/themes/iotools/assets/images/pokemon/blastoise.jpeg",
                "https://iotools.cloud/wp-content/themes/iotools/assets/images/pokemon/charizard.jpeg"
            ];
            popupImage.src = images[Math.floor(Math.random() * images.length)];

            popup.style.display = 'block';
            overlay.style.display = 'block';
        });

        // Cerrar popup
        document.getElementById("popup-close").addEventListener("click", function() {
            document.getElementById('popup').style.display = 'none';
            document.getElementById('popup-overlay').style.display = 'none';
        });

        document.getElementById("popup-close-btn").addEventListener("click", function() {
            document.getElementById('popup').style.display = 'none';
            document.getElementById('popup-overlay').style.display = 'none';
        });

        // Cerrar popup al hacer clic fuera de √©l
        document.getElementById("popup-overlay").addEventListener("click", function() {
            document.getElementById('popup').style.display = 'none';
            document.getElementById('popup-overlay').style.display = 'none';
        });

        // Bot√≥n 3: Vibrar, aumentar tama√±o y lluvia de arroz
        document.getElementById("button3").addEventListener("click", function() {
            vibrateDevice();
            this.style.transition = "transform 0.5s";
            this.style.transform = "translateX(0) translateY(-50%) scale(1.2)";
            setTimeout(() => {
                this.style.transform = "translateX(0) translateY(-50%) scale(1)";
            }, 500);
            showToast(this, "toast3", "Rice for Lowis üç≤");

            // Crear lluvia de arroz
            const rainContainer = document.getElementById('rain');
            rainContainer.innerHTML = ''; // Limpiar lluvia anterior

            for (let i = 0; i < 150; i++) { // N√∫mero de gotas
                const drop = document.createElement('div');
                drop.className = 'drop';
                drop.style.left = `${Math.random() * 100}dvw`; // Posici√≥n horizontal aleatoria
                drop.style.top = `${Math.random() * 100}dvh`; // Posici√≥n vertical inicial
                rainContainer.appendChild(drop);

                // Animaci√≥n de ca√≠da
                setTimeout(() => {
                    drop.style.transition = 'top 1.2s linear';
                    drop.style.top = '100dvh'; // Caer hasta la parte inferior
                }, 10);

                // Eliminar gotas despu√©s de la animaci√≥n
                setTimeout(() => {
                    drop.remove();
                }, 2000);
            }
        });

        // Bot√≥n 4: Animaci√≥n de tres monedas y toast con timestamp
        document.getElementById("button4").addEventListener("click", function() {
            vibrateDevice();

            for (let i = 0; i < 3; i++) {
                const coin = document.createElement("div");
                coin.className = "coin";
                coin.innerHTML = "&#x1F4B0;"; // Emoji de moneda
                this.appendChild(coin);

                // Animaci√≥n ligeramente escalonada para cada moneda
                setTimeout(() => {
                    coin.style.transition = "transform 1s ease, opacity 0.5s ease";
                    coin.style.opacity = 1;
                    coin.style.transform = `translate(-50%, -${380 + i * 20}%)`; // Subir un 380% m√°s cada vez
                    setTimeout(() => {
                        coin.style.transform = "translate(-50%, -50%)"; // Bajar de vuelta al bot√≥n
                        setTimeout(() => {
                            coin.style.opacity = 0;
                            coin.remove();
                        }, 500);
                    }, 500);
                }, i * 150); // Retraso de 150ms entre cada moneda
            }

            // Obtener timestamp en formato reducido (n√∫mero de segundos desde el epoch dividido por 100 y ajustado por el valor 17239067)
            const timestamp = ((Math.floor(Date.now() / 1000) / 100) - 17239067).toFixed(2);
            // Aplicar formato num√©rico con comas como separador decimal y punto como separador de miles
            showToast(this, "toast4", `Gracias por tu aportaci√≥n, ya tenemos ${formatNumber(timestamp)}‚Ç¨`);
        });
    </script>
</body>
</html>
